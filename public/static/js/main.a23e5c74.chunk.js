(this["webpackJsonptravel-app"]=this["webpackJsonptravel-app"]||[]).push([[1],[,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var c=t(0),a=Object(c.createContext)({isSignedIn:!1,loggedUser:null,token:null,userSignin:function(){},userSignout:function(){}})},,,,,function(e,n,t){"use strict";var c=t(1);t(0),t(39);n.a=function(e){return Object(c.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(c.jsx)("div",{className:"lds-dual-ring"})})}},,function(e,n,t){"use strict";var c=t(1),a=(t(0),t(9)),i=t.n(a);t(29);n.a=function(e){return i.a.createPortal(Object(c.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}},,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){},,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var c,a=t(1),i=t(0),s=t.n(i),r=t(9),l=t.n(r),o=(t(28),t(8)),j=t(2),u=t(11),b=t(19),d=(t(30),function(e){return Object(a.jsx)("header",{className:"main-header",children:e.children})}),O=(t(31),t(12)),x=(t(32),function(e){var n=Object(i.useContext)(O.a);return Object(a.jsxs)("ul",{className:"nav-links",children:[Object(a.jsx)("li",{children:Object(a.jsx)(o.c,{to:"/",exact:!0,children:"ALL USERS"})}),n.isSignedIn&&Object(a.jsx)("li",{children:Object(a.jsx)(o.c,{to:"/places/user/".concat(n.loggedUser),children:"VISITED PLACES"})}),n.isSignedIn&&Object(a.jsx)("li",{children:Object(a.jsx)(o.c,{to:"/places/new",children:"ADD PLACE"})}),n.isSignedIn?Object(a.jsx)("li",{children:Object(a.jsx)(o.c,{to:"/auth",children:Object(a.jsx)("button",{onClick:n.userSignout,children:"SIGN OUT"})})}):Object(a.jsx)("li",{children:Object(a.jsx)(o.c,{to:"/auth",children:"SIGN IN"})})]})}),h=t(42),g=(t(38),function(e){var n=Object(a.jsx)(h.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("aside",{className:"side-drawer",onClick:e.closeSideDrawer,children:e.children})});return l.a.createPortal(n,document.getElementById("side-drawer-hook"))}),f=function(e){var n=Object(i.useState)(!1),t=Object(u.a)(n,2),c=t[0],s=t[1],r=function(){s(!1)};return Object(a.jsxs)(i.Fragment,{children:[c&&Object(a.jsx)(b.a,{onClick:r}),Object(a.jsx)(g,{closeSideDrawer:r,show:c,children:Object(a.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(a.jsx)(x,{})})}),Object(a.jsxs)(d,{children:[Object(a.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){s(!0)},children:[Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{})]}),Object(a.jsx)("h1",{className:"main-navigation__title",children:Object(a.jsx)(o.b,{to:"/",children:"Track Places"})}),Object(a.jsx)("nav",{className:"main-navigation__header-nav",children:Object(a.jsx)(x,{})})]})]})},m=function(){var e=Object(i.useContext)(O.a),n=Object(i.useState)(),t=Object(u.a)(n,2),a=t[0],s=t[1],r=Object(i.useState)(),l=Object(u.a)(r,2),o=l[0],j=l[1],b=Object(i.useState)(e.loggedUser),d=Object(u.a)(b,2),x=d[0],h=d[1],g=Object(i.useCallback)((function(e,n,t){s(n),h(e);var c=t||new Date((new Date).getTime()+36e5);j(c),localStorage.setItem("userData",JSON.stringify({userId:e,tokenExpire:c.toISOString(),token:n}))}),[]),f=Object(i.useCallback)((function(){s(null),j(null),h(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.tokenExpire)>new Date&&g(e.userId,e.token,new Date(e.tokenExpire))}),[g]),Object(i.useEffect)((function(){if(a&&o){var e=o.getTime()-(new Date).getTime();c=setTimeout(f,e)}else clearTimeout(c)}),[f,a,o]),{userSignout:f,userSignin:g,loggedUser:x,token:a}},S=t(17),v=s.a.lazy((function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,75))})),p=s.a.lazy((function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,71))})),k=s.a.lazy((function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,74))})),I=s.a.lazy((function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,72))})),w=s.a.lazy((function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,76))})),N=function(){var e=m(),n=e.userSignout,t=e.userSignin,c=e.loggedUser,s=e.token;return Object(a.jsx)(O.a.Provider,{value:{isSignedIn:!!s,token:s,loggedUser:c,userSignout:n,userSignin:t},children:Object(a.jsxs)(o.a,{children:[Object(a.jsx)(f,{}),Object(a.jsx)("main",{children:Object(a.jsx)(i.Suspense,{fallback:Object(a.jsx)("div",{className:"center",children:Object(a.jsx)(S.a,{})}),children:Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/",exact:!0,children:Object(a.jsx)(v,{})}),Object(a.jsx)(j.b,{path:"/places/new",exact:!0,children:Object(a.jsx)(p,{})}),Object(a.jsx)(j.b,{path:"/places/user/:userId/",exact:!0,children:Object(a.jsx)(k,{})}),Object(a.jsx)(j.b,{path:"/places/:placeId",exact:!0,children:Object(a.jsx)(I,{})}),Object(a.jsx)(j.b,{path:"/auth",exact:!0,children:Object(a.jsx)(w,{})}),Object(a.jsx)(j.a,{to:"/"})]})})})]})})},C=function(e){e&&e instanceof Function&&t.e(9).then(t.bind(null,73)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,i=n.getLCP,s=n.getTTFB;t(e),c(e),a(e),i(e),s(e)}))};l.a.render(Object(a.jsx)(N,{}),document.getElementById("root")),C()}],[[40,2,3]]]);
//# sourceMappingURL=main.a23e5c74.chunk.js.map